{% extends "base.html" %} {% block body %}

<body
  class="text-white bg-gradient-to-b from-gray-900 to-black text-gray-200 font-sans"
>
  <!-- ====================== PEL√çCULAS DESTACADAS ====================== -->
  <section class="secciones mt-32 min-h-screen flex">
    <h2 class="titulo text-3xl px-6 font-bold translate-x-[3%]">
      Pel√≠culas destacadas
    </h2>

    <div
      class="cards-peliculas grid grid-cols-4 gap-4 justify-items-center mt-32"
    >
      <div class="card-pelicula felx flex-col items-center">
        <img
          src="{{ url_for('static', filename='img/fast7.jpg') }}"
          alt="Fast & Furious 7"
          class="img-card w-48 h-64 object-cover rounded-t-2xl shadow-lg"
        />
        <div
          class="bg-gray-800 text-white w-48 rounded-b-2xl p-3 text-center shadow-md"
        >
          <h3 class="text-lg font-semibold">A Todo Gas</h3>
          <p class="text-sm text-gray-300">Acci√≥n</p>
        </div>
      </div>

      <div class="card-pelicula">
        <img
          src="{{ url_for('static', filename='img/moana.jpg') }}"
          alt="Moana"
          class="img-card w-48 h-64 object-cover rounded-t-2xl shadow-lg"
        />
        <div
          class="bg-gray-800 text-white w-48 rounded-b-2xl p-3 text-center shadow-md"
        >
          <h3 class="text-lg font-semibold">Moana</h3>
          <p class="text-sm text-gray-300">Animaci√≥n</p>
        </div>
      </div>

      <div class="card-pelicula">
        <img
          src="{{ url_for('static', filename='img/mufasa.jpg') }}"
          alt="Mufasa"
          class="img-card w-48 h-64 object-cover rounded-t-2xl shadow-lg"
        />
        <div
          class="bg-gray-800 text-white w-48 rounded-b-2xl p-3 text-center shadow-md"
        >
          <h3 class="text-lg font-semibold">Mufasa</h3>
          <p class="text-sm text-gray-300">Animaci√≥n</p>
        </div>
      </div>

      <div class="card-pelicula">
        <img
          src="{{ url_for('static', filename='img/gladiator.jpg') }}"
          alt="Gladiator"
          class="img-card w-48 h-64 object-cover rounded-t-2xl shadow-lg"
        />
        <div
          class="bg-gray-800 text-white w-48 rounded-b-2xl p-3 text-center shadow-md"
        >
          <h3 class="text-lg font-semibold">Gladiator</h3>
          <p class="text-sm text-gray-300">Acci√≥n</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ====================== PEL√çCULAS EN CARTELERA ====================== -->
  <section class="secciones mt-32 min-h-screen flex flex-col">
    <h2 class="titulo text-3xl px-6 font-bold translate-x-[3%] mb-8">
      Pel√≠culas En cartelera
    </h2>

    <div
      class="cards-peliculas grid grid-cols-4 gap-2 justify-items-center gap-y-12"
    >
      {% for p in peliculas %}
      <div
        class="card-pelicula pelicula-cartelera cursor-pointer {% if loop.index > 8 %} hidden extra-pelicula {% endif %}"
        data-titulo="{{ p.titulo }}"
        data-duracion="{{ p.duracion }}"
        data-sinopsis="{{ p.sinopsis }}"
        data-director="{{ p.director }}"
        data-genero="{{ p.genero }}"
        data-id="{{ p.id_pelicula }}"
        data-img="{{ url_for('static', filename=p.imagen_url) }}"
      >
        <img
          src="{{ url_for('static', filename=p.imagen_url) }}"
          alt="{{ p.titulo }}"
          class="img-card w-50 h-64 object-cover rounded-t-2xl shadow-lg"
        />

        <div class="text-white w-50 h-15 rounded-b-2xl shadow-md bg-gray-800">
          <h3 class="text-lg font-semibold">{{ p.titulo }}</h3>
          <div class="flex justify-between text-sm text-gray-300">
            <p>{{ p.genero }}</p>
            <p>{{ p.duracion }}'</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <div class="text-center mt-8">
    <button
      id="btnMostrarMas"
      class="px-6 py-3 bg-red-600 hover:bg-red-700 text-white text-lg rounded-xl font-semibold"
    >
      Mostrar m√°s
    </button>
  </div>

  <!-- ====================== SweetAlert2 ====================== -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    function mostrarPelicula(
      titulo,
      duracion,
      sinopsis,
      director,
      genero,
      id_pelicula,
      imagen
    ) {
      Swal.fire({
        width: "80%",
        background: "#111",
        color: "#fff",
        showConfirmButton: false,
        html: `
        <div class="flex flex-col md:flex-row text-left">

            <div class="md:w-1/3">
                <img src="${imagen}" class="rounded-lg shadow-lg w-full mb-4 md:mb-0">

                <div class="flex gap-2 mt-2">
                    <span class="px-3 py-1 bg-gray-700 rounded-full text-sm">
                        ${genero}
                    </span>
                </div>
            </div>

            <div class="md:w-2/3 md:pl-6">
                <h1 class="text-3xl font-bold mb-2 text-red-700">${titulo}</h1>
                <p class="text-gray-300 mb-4 leading-relaxed">${sinopsis}</p>

                <p class="text-sm text-gray-400 mb-2"><b>Director:</b> ${director}</p>
                <p class="text-sm text-gray-400 mb-4"><b>Duraci√≥n:</b> ${duracion} min</p>

                <h2 class="text-xl font-semibold text-white mb-2">Horarios disponibles</h2>

                <div class="flex flex-wrap gap-3 mb-6">
                    <button class="px-4 py-2 bg-gray-700 rounded hover:bg-red-700">16:50</button>
                    <button class="px-4 py-2 bg-gray-700 rounded hover:bg-red-700">19:20</button>
                    <button class="px-4 py-2 bg-gray-700 rounded hover:bg-red-700">21:50</button>
                    <button class="px-4 py-2 bg-gray-700 rounded hover:bg-red-700">22:50</button>
                </div>

                <div class="text-center">
                    <button onclick="location.href='/funciones?pelicula=${id_pelicula}'"
                            class="px-6 py-3 bg-black-600 rounded text-white font-bold hover:bg-red-700">
                        Comprar Entrada üéüÔ∏è
                    </button>
                </div>
            </div>

        </div>
        `,
      });
    }

    // ========================= ASIGNAR CLICK A LAS TARJETAS =========================
    document.querySelectorAll(".card-pelicula").forEach((card) => {
      card.addEventListener("click", () => {
        mostrarPelicula(
          card.dataset.titulo,
          card.dataset.duracion,
          card.dataset.sinopsis,
          card.dataset.director,
          card.dataset.genero,
          card.dataset.id,
          card.dataset.img
        );
      });
    });

    // ========================= MOSTRAR M√ÅS =========================
    document
      .getElementById("btnMostrarMas")
      .addEventListener("click", function () {
        document.querySelectorAll(".extra-pelicula").forEach((card) => {
          card.classList.remove("hidden");
        });
        this.style.display = "none";
      });
  </script>
</body>

{% endblock %}
